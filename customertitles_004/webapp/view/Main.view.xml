<mvc:View 
	xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.m" 
	xmlns:ui="sap.ui.table"
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
	controllerName="com.prestativ.unmd.customertitles.controller.Main" 
	displayBlock="true">
	<NavContainer id="navContainer">
		<pages>
			<Page id="contentPage" title="{i18n>mainViewTitle}" titleLevel="H1">
				<content>
					<VBox width="100%">
						<smartFilterBar:SmartFilterBar
							id="smartFilterBar" 
							persistencyKey="UniqueAndStablePersistencyKey"
							considerSelectionVariants="true"
							entitySet="ZFI_CDS_RETURN_TITCLI"
							search="onPressGoReport"
						>
							<smartFilterBar:controlConfiguration>
								<smartFilterBar:ControlConfiguration
									key="bukrs"
									visibleInAdvancedArea="true"
									preventInitialDataFetchInValueHelpDialog="false"
								/>
								<smartFilterBar:ControlConfiguration
									key="kunnr"
									visibleInAdvancedArea="true"
									preventInitialDataFetchInValueHelpDialog="false"
								/>
								<smartFilterBar:ControlConfiguration
									key="blart"
									visibleInAdvancedArea="true"
									preventInitialDataFetchInValueHelpDialog="false"
								/>
								<smartFilterBar:ControlConfiguration
									key="bupla"
									visibleInAdvancedArea="true"
									preventInitialDataFetchInValueHelpDialog="false"
								/>
							</smartFilterBar:controlConfiguration>
						</smartFilterBar:SmartFilterBar>
					</VBox>
					
					<Panel id="panelTable">
						<content>
							<ui:Table
								id="tableTitClient"
								rows="{
									path: 'customerTitles>/items'
								}"
								selectionMode="None"
								visibleRowCount="12"
								enableColumnFreeze="false"
								enableGrouping="true"
								group="onGroup"
							>
								<ui:extension>
									<OverflowToolbar style="Clear">
										<Title text="{customerTitles>/headerTitleTable}" level="H1" titleStyle="H3"/>
										<ToolbarSpacer />
										<Button
											id="partial"
											text="{i18n>mainCompensatePartial}"
											press="onCompensatePartialTotal"
										/>
										<Button 
											id="total"
											text="{i18n>mainCompensateTotal}"
											press="onCompensatePartialTotal"
										/>
										<OverflowToolbarButton
											type="Transparent"
											icon="sap-icon://action-settings"
											iconDensityAware="false"
											press="onPersoButtonPressed"
										/>
										<Button
											icon="sap-icon://excel-attachment"
											tooltip="{i18n>mainExportExcel}"
											text="{i18n>mainExportExcel}"
											press="onExportExcel"
										/>
									</OverflowToolbar>
								</ui:extension>
								<ui:columns>
									<ui:Column
										id="bukrs"
										width="6rem"
										filterOperator="Contains" 
										filterProperty="bukrs"
										sortProperty="bukrs"
									>
										<Label text="{i18n>mainTableCompany}" />
										<ui:template>
											<Text text="{customerTitles>bukrs}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="companyName"
										width="10rem"
										filterOperator="Contains" 
										filterProperty="companyName"
										sortProperty="companyName"
									>
										<Label text="{i18n>mainTableCompanyName}" />
										<ui:template>
											<Text text="{customerTitles>companyName}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="kunnr"
										width="6rem"
										filterOperator="Contains" 
										filterProperty="kunnr"
										sortProperty="kunnr"
									>
										<Label text="{i18n>mainTableClient}" />
										<ui:template>
											<Text text="{customerTitles>kunnr}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="customerName"
										width="10rem"
										filterOperator="Contains" 
										filterProperty="customerName"
										sortProperty="customerName"
									>
										<Label text="{i18n>mainTableCustomerName}" />
										<ui:template>
											<Text text="{customerTitles>customerName}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="belnr"
										width="10rem"
										filterOperator="Contains" 
										filterProperty="belnr"
										sortProperty="belnr"
									>
										<Label text="{i18n>mainTableDocumentNumber}" />
										<ui:template>
											<Text text="{customerTitles>belnr}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="blart"
										width="10rem"
										filterOperator="Contains" 
										filterProperty="blart"
										sortProperty="blart"
									>
										<Label text="{i18n>mainTableDocumentType}" />
										<ui:template>
											<Text text="{customerTitles>blart} - {customerTitles>typeDocumentName}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="xblnr"
										width="8rem"
										filterOperator="Contains" 
										filterProperty="xblnr"
										sortProperty="xblnr"
									>
										<Label text="{i18n>mainTableReferenceDocument}" />
										<ui:template>
											<Text text="{customerTitles>xblnr}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="budat"
										width="8rem"
										filterOperator="Contains" 
										filterProperty="budat"
										sortProperty="budat"
									>
										<Label text="{i18n>mainTableDocumentDate}" />
										<ui:template>
											<Text 
												text="{
													path: 'customerTitles>budat',
													type : 'sap.ui.model.type.Date',
													formatOptions: {
														style: 'short'
													}
												}"
											/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="bldat"
										width="8rem"
										filterOperator="Contains" 
										filterProperty="bldat"
										sortProperty="bldat"
									>
										<Label text="{i18n>mainTableReleaseDate}" />
										<ui:template>
											<Text 
												text="{
													path: 'customerTitles>bldat',
													type : 'sap.ui.model.type.Date',
													formatOptions: {
														style: 'short'
													}
												}"
											/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="bktxt"
										width="10rem"
										filterOperator="Contains" 
										filterProperty="bktxt"
										sortProperty="bktxt"
									>
										<Label text="{i18n>mainTableHeaderText}" />
										<ui:template>
											<Text text="{customerTitles>bktxt}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="bupla"
										width="8rem"
										filterOperator="Contains" 
										filterProperty="bupla"
										sortProperty="bupla"
									>
										<Label text="{i18n>mainTablePlaceOfBusiness}" />
										<ui:template>
											<Text text="{customerTitles>bupla}"/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="wrbtr"
										width="8rem"
										filterOperator="Contains" 
										filterProperty="wrbtr"
										sortProperty="wrbtr"
									>
										<Label text="{i18n>mainTableTransactionCurrencyAmount}" />
										<ui:template>
											<Text 
												text="{
													path: 'customerTitles>wrbtr',
                                            		formatter: '.formatter.currencyInBRL'
												}"
											/>
										</ui:template>
									</ui:Column>
									<ui:Column
										id="wrbtr_appl"
										width="12rem"
										filterOperator="Contains" 
										filterProperty="wrbtr_appl"
										sortProperty="wrbtr_appl"
									>
										<Label text="{i18n>mainTableAmountAllocated}" />
										<ui:template>
											<Input
												id="wrbtr_appliInput"
												value="{customerTitles>wrbtr_appl}"
												liveChange="onFormatterCurrencyAmount"
											/>
										</ui:template>
									</ui:Column>
								</ui:columns>
							</ui:Table>
						</content>
					</Panel>
				</content>
			</Page>
		</pages>
	</NavContainer>
</mvc:View>